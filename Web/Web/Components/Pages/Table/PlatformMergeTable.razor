@rendermode InteractiveServer
@using Domain.Model.Models.Output
@inherits LayoutComponentBase
@using Model;
@using Web.Components.Pages.Input.Dialog.Edit
@using Web.Services
@inject PlatformService PlatformService
@inject FlattenTreeService FlattenTreeService

@page "/PlatformTable"
<div class="page">
    <main>
        <div class="TableStyle">
            <div class="table-sizes">
                <RadzenDataGrid Data="@tableRow" ColumnWidth="100px" AllowFiltering="true" FilterPopupRenderMode="PopupRenderMode.OnDemand" FilterMode="FilterMode.Advanced"
                                AllowPaging="true" PageSize="5" SelectionMode="DataGridSelectionMode.Single
                            " AllowColumnResize="true" GridLines="DataGridGridLines.Both">
                    <Columns>

                        <RadzenDataGridColumn Title="Номер площадки" Width="80px" TextAlign="TextAlign.Center">
                            <Template Context="platform">
                                @platform.PlatformNumber
                            </Template>
                        </RadzenDataGridColumn>
                        <RadzenDataGridColumn Title="Дата объединения площадки" Width="80px" TextAlign="TextAlign.Center">
                            <Template Context="platform">
                                @platform.Date
                            </Template>
                        </RadzenDataGridColumn>
                        <RadzenDataGridColumn Title="Груз на площадке(т)" Width="80px" TextAlign="TextAlign.Center">
                            <Template Context="platform">
                                @platform.PlatformCargo
                            </Template>
                        </RadzenDataGridColumn>



                    </Columns>

                </RadzenDataGrid>
            </div>
        </div>
    </main>
</div>
@code {

    private IEnumerable<PlatformOutput>? platforms;

    public List<TableRowPlatform> tableRow { get; set; }
    protected override async Task OnInitializedAsync()
    {
        platforms = await PlatformService.GetPlatformAsync();
        tableRow = FlattenTreeService.FlattenTreePlatform(platforms);
    }
}
