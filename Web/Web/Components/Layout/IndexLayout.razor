@page "/"
@using Web.Components.Pages.Table
@using Web.Components.Pages.Input.Button
@using Domain.Model.Models.Output
@using Web.Services

@inject WarehouseService WarehouseService
@inject PlatformService PlatformService
@layout Web.Components.Layout.MainLayout

<WarehouseTable Warehouses="warehouses" />
<CreateWarehouseButton/>
<CreatePlatformButton warehouses="@warehouses"/>
<CreatePicketButton Platforms="platforms"/>

@code{

    private IEnumerable<WarehouseOutput>? warehouses;
    private IEnumerable<PlatformOutput>? platforms;

    protected override async Task OnInitializedAsync()
    {

        try
        {
            warehouses = await WarehouseService.GetWarehousesAsync();

            platforms = await PlatformService.GetPlatformAsync();
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error: {ex.Message}");
        }
    }
}
