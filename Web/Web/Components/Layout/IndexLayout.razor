@using Web.Components.Pages.Table
@using Web.Components.Pages.Input.Button
@using Domain.Model.Models.Output
@inject IHttpClientFactory ClientFactory
@page "/"

@layout Web.Components.Layout.MainLayout

<WarehouseTable warehouses="@warehouses"></WarehouseTable>
<CreateWarehouseInput></CreateWarehouseInput>
<CreatePlatformInput warehouses="@warehouses"></CreatePlatformInput>

@code{
    private IEnumerable<WarehouseOutput>? warehouses;
    private IEnumerable<PlatformOutput>? platforms;
    private IEnumerable<PicketOutput>? pickets;

    [Inject] private IHttpClientFactory HttpClientFactory { get; set; } = default!;
    protected override async Task OnInitializedAsync()
    {
        var httpClient = HttpClientFactory.CreateClient();
        try
        {
            warehouses = await httpClient.GetFromJsonAsync<IEnumerable<WarehouseOutput>>("https://localhost:7294/Warehouse/Warehouse-list");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error: {ex.Message}");
        }
        finally
        {
            
        }
    }
}
